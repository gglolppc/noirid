<!DOCTYPE html>
<html lang="en" class="js-loading">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="NOIRID: Custom black-on-black phone cases. Personal identity in texture." />
  <title>{% block title %}NOIRID{% endblock %}</title>

  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" as="style">
  <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    html, body {
      background-color: #050505 !important;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Inter', sans-serif;
      color: #f4f4f5;
    }
    .reveal {
      opacity: 0;
      filter: blur(8px);
      transform: translateY(30px);
      transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1),
                  transform 1s cubic-bezier(0.16, 1, 0.3, 1),
                  filter 1s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .reveal.active {
      opacity: 1;
      filter: blur(0);
      transform: translateY(0);
    }
    .js-loading .reveal { opacity: 0 !important; }

    /* Состояние открытого меню */
    #mobile-menu.open {
      display: flex;
      animation: fadeIn 0.3s ease forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>

  <script>document.documentElement.classList.add('js-loading');</script>
</head>

<body class="antialiased selection:bg-white selection:text-black">
  <div class="pointer-events-none fixed inset-0 z-[100] opacity-[0.08]"
       style="background-image:url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Cfilter id=%22n%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.7%22 numOctaves=%224%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22200%22 height=%22200%22 filter=%22url(%23n)%22/%3E%3C/svg%3E');">
  </div>

  {% block header %}
  <header class="fixed top-0 left-0 right-0 z-[60] py-6 bg-[#050505]/80 backdrop-blur-md">
    <div class="mx-auto max-w-7xl px-6 flex items-center justify-between">
      <a href="/" class="text-xs tracking-[0.5em] font-light text-white/80 hover:text-white transition" aria-label="NOIRID Home">
        NOIRID
      </a>

      <nav class="hidden md:flex gap-10 text-xs uppercase tracking-[0.3em] text-zinc-400">
        <a class="hover:text-white transition" href="/catalog">Catalog</a>
        <a class="hover:text-white transition" href="/delivery">Delivery</a>
        <a class="hover:text-white transition" href="/cart">Cart</a>
      </nav>

      <button id="menu-toggle" class="md:hidden flex flex-col gap-1.5 p-2 focus:outline-none" aria-label="Toggle Menu">
        <span class="w-6 h-px bg-white transition-all"></span>
        <span class="w-6 h-px bg-white transition-all"></span>
      </button>
    </div>

    <div id="mobile-menu" class="hidden fixed inset-0 top-[72px] bg-[#050505] z-[50] flex-col items-center justify-center gap-8 text-center px-6">
      <nav class="flex flex-col gap-8 text-sm uppercase tracking-[0.4em] text-zinc-400">
        <a class="hover:text-white transition" href="/catalog">Catalog</a>
        <a class="hover:text-white transition" href="/delivery">Delivery</a>
        <a class="hover:text-white transition" href="/cart">Cart</a>
      </nav>
    </div>
  </header>
  {% endblock %}

  <main class="pt-24"> {% block content %}{% endblock %}
  </main>

  {% block footer %}
  <footer class="border-t border-white/10 py-16 bg-[#050505]">
    <div class="mx-auto max-w-7xl px-6 flex flex-col md:flex-row justify-between items-center gap-8">
      <div class="text-xs uppercase tracking-[0.3em] text-zinc-500 text-center md:text-left">
        © NOIRID — Discreet Identity in Texture
      </div>
      <nav class="flex flex-wrap justify-center gap-8 text-xs uppercase tracking-[0.3em] text-zinc-400">
        <a href="/about" class="hover:text-white transition">Philosophy</a>
        <a href="/check-order" class="hover:text-white transition text-zinc-200">Check Order</a> <a href="/support" class="hover:text-white transition">Support</a>
      </nav>
    </div>
  </footer>
  {% endblock %}

  <script>
    const initApp = () => {
      document.documentElement.classList.remove('js-loading');

      // Логика меню
      const toggleBtn = document.getElementById('menu-toggle');
      const mobileMenu = document.getElementById('mobile-menu');

      toggleBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
        mobileMenu.classList.toggle('open');
        document.body.classList.toggle('overflow-hidden'); // Блокируем скролл при открытом меню
      });

      // Intersection Observer
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('active');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });

      document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    };

    Promise.all([
      document.fonts.ready,
      new Promise(resolve => window.addEventListener('load', resolve))
    ]).then(initApp);
  </script>
</body>
</html>